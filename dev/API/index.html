<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>API Documentation · AlignedSpans</title><meta name="title" content="API Documentation · AlignedSpans"/><meta property="og:title" content="API Documentation · AlignedSpans"/><meta property="twitter:title" content="API Documentation · AlignedSpans"/><meta name="description" content="Documentation for AlignedSpans."/><meta property="og:description" content="Documentation for AlignedSpans."/><meta property="twitter:description" content="Documentation for AlignedSpans."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">AlignedSpans</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Introduction</a></li><li class="is-active"><a class="tocitem" href>API Documentation</a><ul class="internal"><li><a class="tocitem" href="#Interface-for-conversion-from-continuous-time-spans"><span>Interface for conversion from continuous time spans</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>API Documentation</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>API Documentation</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/beacon-biosignals/AlignedSpans.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/beacon-biosignals/AlignedSpans.jl/blob/main/docs/src/API.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="API-documentation"><a class="docs-heading-anchor" href="#API-documentation">API documentation</a><a id="API-documentation-1"></a><a class="docs-heading-anchor-permalink" href="#API-documentation" title="Permalink"></a></h1><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AlignedSpans.AlignedSpan" href="#AlignedSpans.AlignedSpan"><code>AlignedSpans.AlignedSpan</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">AlignedSpan(sample_rate::Number, first_index::Int, last_index::Int)</code></pre><p>Construct an <code>AlignedSpan</code> directly from a <code>sample_rate</code> and indices.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/beacon-biosignals/AlignedSpans.jl/blob/91907c3ad7802f3ab63b00a869c0ce3c2cdbe610/src/AlignedSpans.jl#L208-L212">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AlignedSpans.SpanRoundingMode" href="#AlignedSpans.SpanRoundingMode"><code>AlignedSpans.SpanRoundingMode</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">SpanRoundingMode(start::RoundingMode, stop::RoundingMode)</code></pre><p>Creates a rounding object for <a href="#AlignedSpans.AlignedSpan"><code>AlignedSpan</code></a> to indicate how the <code>AlignedSpan</code>&#39;s endpoints should be determined from a given <code>span</code>s endpoints&#39;.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/beacon-biosignals/AlignedSpans.jl/blob/91907c3ad7802f3ab63b00a869c0ce3c2cdbe610/src/AlignedSpans.jl#L20-L25">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AlignedSpans.RoundInward" href="#AlignedSpans.RoundInward"><code>AlignedSpans.RoundInward</code></a> — <span class="docstring-category">Constant</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">RoundInward = SpanRoundingMode(RoundUp, RoundDown)</code></pre><p>This is a rounding mode where both ends of the continuous time interval are rounded &quot;inwards&quot; to construct the largest span of indices such that all samples, as instants of time, occur within the span.</p><p><strong>Example</strong></p><p>Consider a signal with sample rate 1 Hz.</p><pre><code class="nohighlight hljs">Index       1   2   3   4   5
Time (s)    0   1   2   3   4</code></pre><p>Now, consider the time span 1.5s (inclusive) to 2.5s (exclusive). Using brackets to highlight this span:</p><pre><code class="nohighlight hljs">Index       1   2     3     4   5
Time (s)    0   1  [  2  )  3   4</code></pre><p>In code, this span is described by</p><pre><code class="language-julia-repl hljs">julia&gt; using AlignedSpans, Dates, TimeSpans

julia&gt; ts = TimeSpan(Millisecond(1500), Millisecond(2500))
TimeSpan(00:00:01.500000000, 00:00:02.500000000)</code></pre><p>The only sample within the span is at index 3. And indeed,</p><pre><code class="language-julia-repl hljs">julia&gt; aligned = AlignedSpan(1, ts, RoundInward)
AlignedSpan(1, 3, 3)

julia&gt; AlignedSpans.indices(aligned)
3:3</code></pre><p>gives an <code>AlignedSpan</code> with indices <code>3:3</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/beacon-biosignals/AlignedSpans.jl/blob/91907c3ad7802f3ab63b00a869c0ce3c2cdbe610/src/AlignedSpans.jl#L46-L87">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AlignedSpans.RoundSpanDown" href="#AlignedSpans.RoundSpanDown"><code>AlignedSpans.RoundSpanDown</code></a> — <span class="docstring-category">Constant</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">RoundSpanDown = SpanRoundingMode(RoundDown, RoundDown)</code></pre><p>This is a rounding mode where <em>both</em> ends of the continuous time interval are rounded downwards.</p><p><strong>Example</strong></p><p>Consider a signal with sample rate 1 Hz.</p><pre><code class="nohighlight hljs">Index       1   2   3   4   5
Time (s)    0   1   2   3   4</code></pre><p>Now, consider the time span 1.5s (inclusive) to 2.5s (exclusive). Using brackets to highlight this span:</p><pre><code class="nohighlight hljs">Index       1   2     3     4   5
Time (s)    0   1  [  2  )  3   4</code></pre><p>In code, this span is described by</p><pre><code class="language-julia-repl hljs">julia&gt; using AlignedSpans, Dates, TimeSpans

julia&gt; ts = TimeSpan(Millisecond(1500), Millisecond(2500))
TimeSpan(00:00:01.500000000, 00:00:02.500000000)</code></pre><p>If we round both ends of the interval down to the nearest sample, the start of the interval becomes 1s, and the stop of the interval becomes 2s. Thus, the associated samples are at indices <code>2:3</code>. And indeed,</p><pre><code class="language-julia-repl hljs">julia&gt; aligned = AlignedSpan(1, ts, RoundSpanDown)
AlignedSpan(1, 2, 3)

julia&gt; AlignedSpans.indices(aligned)
2:3</code></pre><p>gives an <code>AlignedSpan</code> with indices <code>2:3</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/beacon-biosignals/AlignedSpans.jl/blob/91907c3ad7802f3ab63b00a869c0ce3c2cdbe610/src/AlignedSpans.jl#L90-L133">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AlignedSpans.RoundFullyContainedSampleSpans" href="#AlignedSpans.RoundFullyContainedSampleSpans"><code>AlignedSpans.RoundFullyContainedSampleSpans</code></a> — <span class="docstring-category">Constant</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">RoundFullyContainedSampleSpans</code></pre><p>This is a special rounding mode which differs from the other rounding modes by associating each sample with a <em>span</em> (from the instant the sample occurs until just before the next sample occurs), and rounding inwards to the &quot;sample spans&quot; that are fully contained in the input span.</p><p>This is in some sense a stricter form of inward rounding than provided by <a href="#AlignedSpans.RoundInward"><code>RoundInward</code></a>.</p><p><strong>Example</strong></p><p>Consider a signal with sample rate 1 Hz.</p><pre><code class="nohighlight hljs">Index       1   2   3   4   5
Time (s)    0   1   2   3   4</code></pre><p>Normally, we consider each sample to occur at an instant of time. For <code>RoundFullyContainedSampleSpans</code>, we consider the span between a sample occurring and the next sample. (This usually does not make sense for digital sensors, but can make sense for things like hypnograms in which a sample summarizes some region of time).</p><p>Thus, to each index (each sample), we associate a 1s closed-open span of time:</p><pre><code class="nohighlight hljs">Index        1     2     3     4     5
Span (s)    [0   )[1   )[2   )[3   )[4    )</code></pre><p>The span durations are <code>1/sample_rate</code>, which is 1s in this example.</p><p>Now, consider the input time span 1.5s (inclusive) to 3.5s (exclusive). Using brackets to highlight this span:</p><pre><code class="nohighlight hljs">Index        1     2     3     4     5
Span (s)    [0   )[1   )[2   )[3   )[4    )
Time (s)     0     1  [  2     3  )  4</code></pre><p>This input span contains only one sample-span, namely <code>[2s, 3s)</code>. The span from <code>[1s, 2)</code> is not fully contained, nor is the span from <code>[3s, 4s)</code>.</p><p>Thus, in this scenario, <code>RoundFullyContainedSampleSpans</code> would give a single sample, that at index 3, associated to <code>[2s, 3s)</code>.</p><p>In code, this span is described by</p><pre><code class="language-julia-repl hljs">julia&gt; using AlignedSpans, Dates, TimeSpans

julia&gt; ts = TimeSpan(Millisecond(1500), Millisecond(3500))
TimeSpan(00:00:01.500000000, 00:00:03.500000000)

julia&gt; aligned = AlignedSpan(1, ts, RoundFullyContainedSampleSpans)
AlignedSpan(1, 3, 3)

julia&gt; AlignedSpans.indices(aligned)
3:3</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/beacon-biosignals/AlignedSpans.jl/blob/91907c3ad7802f3ab63b00a869c0ce3c2cdbe610/src/AlignedSpans.jl#L138-L195">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AlignedSpans.AlignedSpan-Tuple{Any, Any, SpanRoundingMode}" href="#AlignedSpans.AlignedSpan-Tuple{Any, Any, SpanRoundingMode}"><code>AlignedSpans.AlignedSpan</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">AlignedSpan(sample_rate, span, mode::SpanRoundingMode)</code></pre><p>Creates an <code>AlignedSpan</code> by rounding the left endpoint according to <code>mode.start</code>, and the right endpoint by <code>mode.stop</code>.</p><p>If <code>mode.start==RoundUp</code>, then the left index of the resulting span is guaranteed to be inside <code>span</code>. This is accomplished by checking if the left endpoint of the span is exclusive, and if so, incrementing the index after rounding when necessary.</p><p>Likewise, if <code>mode.stop==RoundDown</code>, then the right index of the resulting span is guaranteed to be inside <code>span</code>. This is accomplished by checking if the right endpoint of the span is exclusive, and if so, decrementing the index after rounding when necessary.</p><p>Note: <code>span</code> may be of any type which which provides methods for <code>AlignedSpans.start_index_from_time</code> and <code>AlignedSpans.stop_index_from_time</code>.</p><div class="admonition is-warning" id="Warning-e74bccc0153a4861"><header class="admonition-header">Warning<a class="admonition-anchor" href="#Warning-e74bccc0153a4861" title="Permalink"></a></header><div class="admonition-body"><p>If the input <code>span</code> is not sample-aligned, meaning the <code>start</code> and <code>stop</code> of the input span are not exact multiples of the sample rate, the results can be non-intuitive at first. Each underlying sample is considered to occur at some instant in time (not, e.g. over a span of duration of <code>1/sample_rate</code>), and the rounding is relative to the samples themselves.</p><p>So for example:</p><pre><code class="language-julia-repl hljs">julia&gt; using TimeSpans, AlignedSpans, Dates

julia&gt; sample_rate = 1/30
0.03333333333333333

julia&gt; input = TimeSpan(0, Second(30) + Nanosecond(1))
TimeSpan(00:00:00.000000000, 00:00:30.000000001)

julia&gt; aligned = AlignedSpan(sample_rate, input, RoundInward) # or RoundSpanDown
AlignedSpan(1//30, 1, 2)

julia&gt; TimeSpan(aligned)
TimeSpan(00:00:00.000000000, 00:01:00.000000000)
</code></pre><p>Even though we have specified <code>RoundInward</code> or <code>RoundSpanDown</code>, both of which round the right-endpoint down, the resulting sample-aligned <code>TimeSpan(aligned)</code> is <code>TimeSpan(0, Second(60))</code>.</p><p>How can this be? Clearly <code>Second(60) &gt; Second(30) + Nanosecond(1)</code>, so what is going on?</p><p>To understand this, note that at 1/30Hz, the samples occur at 00:00, 00:30, 00:60, and so forth. The original input span includes <em>two</em> samples, the one at 00:00 and the one at 00:30. Rounding inward to include only samples that occur within the span means including both samples (see <a href="#AlignedSpans.RoundFullyContainedSampleSpans"><code>RoundFullyContainedSampleSpans</code></a> for alternate behavior).</p><p>When converting back to TimeSpans, AlignedSpans canonicalizes <code>AlignedSpan(1/30, 1, 2)</code> as <code>TimeSpan(0, Second(60))</code>, representing these two samples as the time from the first sample until just before the not-included sample-3 (which occurs at <code>Second(60)</code>), using that <code>TimeSpan</code>&#39;s exclude their right endpoint.</p><p>AlignedSpans could make a different choice to e.g. canonicalize samples to only add an additional nanosecond, but that has its own issue (e.g. <code>TimeSpan(AlignedSpan(sample_rate, 1, 2))</code> and <code>TimeSpan(AlignedSpan(sample_rate, 3, 4))</code> would not be consecutive).</p></div></div><p>See also <a href="#AlignedSpans.AlignedSpan"><code>AlignedSpan(sample_rate, span, mode::RoundingModeFullyContainedSampleSpans)</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/beacon-biosignals/AlignedSpans.jl/blob/91907c3ad7802f3ab63b00a869c0ce3c2cdbe610/src/AlignedSpans.jl#L264-L316">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AlignedSpans.ConstantSamplesRoundingMode" href="#AlignedSpans.ConstantSamplesRoundingMode"><code>AlignedSpans.ConstantSamplesRoundingMode</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ConstantSamplesRoundingMode(start::RoundingMode)</code></pre><p>Creates a rounding object for <a href="#AlignedSpans.AlignedSpan"><code>AlignedSpan</code></a> to indicate the <code>AlignedSpan</code> should be constructed by the <code>start</code> and <code>duration</code> of the <code>span</code>, without regard to its <code>stop</code>.</p><p>If two <code>span</code>s have the same duration, then the resulting <code>AlignedSpan</code>&#39;s will have the same number of samples when constructed with this rounding mode.</p><p>See also <a href="#AlignedSpans.AlignedSpan-Tuple{Any, Any, ConstantSamplesRoundingMode}"><code>AlignedSpan(sample_rate, span, mode::ConstantSamplesRoundingMode)</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/beacon-biosignals/AlignedSpans.jl/blob/91907c3ad7802f3ab63b00a869c0ce3c2cdbe610/src/AlignedSpans.jl#L31-L41">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AlignedSpans.AlignedSpan-Tuple{Any, Any, ConstantSamplesRoundingMode}" href="#AlignedSpans.AlignedSpan-Tuple{Any, Any, ConstantSamplesRoundingMode}"><code>AlignedSpans.AlignedSpan</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">AlignedSpan(sample_rate, span, mode::ConstantSamplesRoundingMode)</code></pre><p>Creates an <code>AlignedSpan</code> whose left endpoint is rounded according to <code>mode.start</code>, and whose right endpoint is determined so by the left endpoint and the number of samples, given by <code>AlignedSpans.n_samples(sample_rate, duration(span))</code>.</p><p>Interface: <code>span</code> may be of any type which which provides a method for <a href="#AlignedSpans.start_index_from_time"><code>AlignedSpans.start_index_from_time</code></a> and <code>TimeSpans.duration</code>.</p><p><strong>More detailed information</strong></p><p>This is designed so that if <code>AlignedSpan(sample_rate, span, mode::ConstantSamplesRoundingMode)</code> is applied to multiple <code>span</code>s, with the same <code>sample_rate</code>, and the same durations, then the resulting <code>AlignedSpan</code>&#39;s will have the same number of samples.</p><p>For this reason, we ask for <code>TimeSpans.duration(span)</code> to be defined, rather than a <code>n_samples(span)</code> function: the idea is that we want to only using the duration and the starting time, rather than the <em>actual</em> number of samples in this particular <code>span</code>.</p><p>In contrast, <a href="#AlignedSpans.RoundInward"><code>RoundInward</code></a> provides an <code>AlignedSpan</code> which includes only (and exactly) the samples which occur within <code>span</code> (as instants in time), while <a href="#AlignedSpans.AlignedSpan"><code>AlignedSpan(sample_rate, span, ::RoundingModeFullyContainedSampleSpans)</code></a> provides an <code>AlignedSpan</code> consisting of the full spans from each sample until the next sample occurs that are contained in the input span.</p><p>If one wants to create a collection of consecutive, non-overlapping, <code>AlignedSpans</code> each with the same number of samples, then use <a href="#AlignedSpans.consecutive_subspans"><code>consecutive_subspans</code></a> instead.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/beacon-biosignals/AlignedSpans.jl/blob/91907c3ad7802f3ab63b00a869c0ce3c2cdbe610/src/AlignedSpans.jl#L324-L342">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AlignedSpans.consecutive_subspans" href="#AlignedSpans.consecutive_subspans"><code>AlignedSpans.consecutive_subspans</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">consecutive_subspans(span::AlignedSpan, duration::Period; keep_last=true)
consecutive_subspans(span::AlignedSpan, n_window_samples::Int; keep_last=true)</code></pre><p>Creates an iterator of <code>AlignedSpan</code> such that each <code>AlignedSpan</code> has consecutive indices which cover the original <code>span</code>&#39;s indices (when <code>keep_last=true</code>).</p><p>If <code>keep_last=true</code> (the default behavior), then the last span may have fewer samples than the others, and</p><ul><li>Each span has <code>n_window_samples</code> samples (which is calculated as <code>n_samples(span.sample_rate, duration)</code> if <code>duration::Period</code> is supplied), except possibly</li></ul><p>the last one, which may have fewer.</p><ul><li>The number of subspans is given by <code>cld(n_samples(span), n_window_samples)</code>,</li><li>The number of samples in the last subspan is <code>r = rem(n_samples(span), n_window_samples)</code> unless <code>r=0</code>, in which</li></ul><p>case the the last subspan has the same number of samples as the rest, namely <code>n_window_samples</code>.</p><ul><li>All of the indices of <code>span</code> are guaranteed to be covered by exactly one subspan</li></ul><p>If <code>keep_last=false</code>, then all spans will have the same number of samples:</p><ul><li>Each span has <code>n_window_samples</code> samples (which is calculated as <code>n_samples(span.sample_rate, duration)</code> if <code>duration::Period</code> is supplied)</li><li>The number of subspans is given by <code>fld(n_samples(span), n_window_samples)</code></li><li>The last part of the <code>span</code>&#39;s indices may not be covered (when we can&#39;t fit in another subspan of length <code>n_window_samples</code>)</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/beacon-biosignals/AlignedSpans.jl/blob/91907c3ad7802f3ab63b00a869c0ce3c2cdbe610/src/utilities.jl#L15-L35">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AlignedSpans.consecutive_overlapping_subspans" href="#AlignedSpans.consecutive_overlapping_subspans"><code>AlignedSpans.consecutive_overlapping_subspans</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">consecutive_overlapping_subspans(span::AlignedSpan, duration::Period,
                                 hop_duration::Period)
consecutive_overlapping_subspans(span::AlignedSpan, n_window_samples::Int, n_hop_samples::Int)</code></pre><p>Create an iterator of <code>AlignedSpan</code> such that each <code>AlignedSpan</code> has <code>n_window_samples</code> (calculated as <code>n_samples(span.sample_rate, duration)</code> if <code>duration::Period</code> is supplied) samples, shifted by <code>n_hop_samples</code> (calculated as <code>n_samples(span.sample_rate, hop_duration)</code> if <code>hop_duration::Period</code> is supplied) samples between consecutive spans.</p><div class="admonition is-warning" id="Warning-493cd9970ff240cd"><header class="admonition-header">Warning<a class="admonition-anchor" href="#Warning-493cd9970ff240cd" title="Permalink"></a></header><div class="admonition-body"><p>When <code>n_samples(span)</code> is not an integer multiple of <code>n_window_samples</code>, only AlignedSpans with <code>n_window_samples</code> samples will be returned. This is analgous to <code>consecutive_subspans</code> with <code>keep_last=false</code>, which is not the default behavior for <code>consecutive_subspans</code>.</p></div></div><p>Note: If <code>hop_duration</code> cannot be represented as an integer number of samples, rounding will occur to ensure that all output AlignedSpans will have the same number of samples. When rounding occurs, the output <code>hop_duration</code> will be: <code>Nanosecond(n_samples(samp_rate, hop_duration) / samp_rate * 1e9)</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/beacon-biosignals/AlignedSpans.jl/blob/91907c3ad7802f3ab63b00a869c0ce3c2cdbe610/src/utilities.jl#L53-L71">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AlignedSpans.n_samples" href="#AlignedSpans.n_samples"><code>AlignedSpans.n_samples</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">n_samples(sample_rate, duration::Union{Period, Dates.CompoundPeriod})</code></pre><p>Returns the minimal number of samples that can occur in a span of <code>duration</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/beacon-biosignals/AlignedSpans.jl/blob/91907c3ad7802f3ab63b00a869c0ce3c2cdbe610/src/time_index_conversions.jl#L23-L27">source</a></section><section><div><pre><code class="language-julia hljs">n_samples(aligned::AlignedSpan)</code></pre><p>Returns the number of samples present in the span <code>aligned</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/beacon-biosignals/AlignedSpans.jl/blob/91907c3ad7802f3ab63b00a869c0ce3c2cdbe610/src/utilities.jl#L8-L12">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AlignedSpans.indices" href="#AlignedSpans.indices"><code>AlignedSpans.indices</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">AlignedSpans.indices(span::AlignedSpan) -&gt; UnitRange{Int64}</code></pre><p>Returns the sample indices associated to an <code>AlignedSpan</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/beacon-biosignals/AlignedSpans.jl/blob/91907c3ad7802f3ab63b00a869c0ce3c2cdbe610/src/utilities.jl#L1-L5">source</a></section></article><h2 id="Interface-for-conversion-from-continuous-time-spans"><a class="docs-heading-anchor" href="#Interface-for-conversion-from-continuous-time-spans">Interface for conversion from continuous time spans</a><a id="Interface-for-conversion-from-continuous-time-spans-1"></a><a class="docs-heading-anchor-permalink" href="#Interface-for-conversion-from-continuous-time-spans" title="Permalink"></a></h2><p>In order to support conversion of continuous time <code>span</code> types to <a href="#AlignedSpans.AlignedSpan"><code>AlignedSpan</code></a>&#39;s, three methods may be defined. These are not exported, because they are generally not used directly, but rather defined in order to facilitate use of the <a href="#AlignedSpans.AlignedSpan"><code>AlignedSpan</code></a> constructors.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AlignedSpans.start_index_from_time" href="#AlignedSpans.start_index_from_time"><code>AlignedSpans.start_index_from_time</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">AlignedSpans.start_index_from_time(sample_rate, span, rounding_mode)</code></pre><p>Returns the index of a sample object obtained by rounding the start of <code>span</code> according to <code>rounding_mode</code>.</p><p>See also <a href="#AlignedSpans.AlignedSpan-Tuple{Any, Any, SpanRoundingMode}"><code>AlignedSpan(sample_rate, span, mode::SpanRoundingMode)</code></a> and <a href="#AlignedSpans.AlignedSpan-Tuple{Any, Any, ConstantSamplesRoundingMode}"><code>AlignedSpan(sample_rate, span, mode::ConstantSamplesRoundingMode)</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/beacon-biosignals/AlignedSpans.jl/blob/91907c3ad7802f3ab63b00a869c0ce3c2cdbe610/src/AlignedSpans.jl#L241-L248">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="AlignedSpans.stop_index_from_time" href="#AlignedSpans.stop_index_from_time"><code>AlignedSpans.stop_index_from_time</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">AlignedSpans.stop_index_from_time(sample_rate, span, rounding_mode)</code></pre><p>Returns the index of a sample object obtained by rounding the stop of <code>span</code> according to <code>rounding_mode</code>.</p><p>See also <a href="#AlignedSpans.AlignedSpan-Tuple{Any, Any, SpanRoundingMode}"><code>AlignedSpan(sample_rate, span, mode::SpanRoundingMode)</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/beacon-biosignals/AlignedSpans.jl/blob/91907c3ad7802f3ab63b00a869c0ce3c2cdbe610/src/AlignedSpans.jl#L251-L257">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Introduction</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.11.4 on <span class="colophon-date" title="Tuesday 3 June 2025 19:18">Tuesday 3 June 2025</span>. Using Julia version 1.11.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
